<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>智能小车控制中心</title>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/static/styles.css?v={{ range(1000, 9999) | random | int }}">
    <!-- PWA配置 -->
    <link rel="manifest" href="/static/manifest.json">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="小十八控制">
    <link rel="apple-touch-icon" href="/static/svgs/crab.svg">
</head>
<body>
<div class="container">
    <header class="header">
        <h1>智能小车控制</h1>
    </header>

    <main class="main-content">
        <!-- 视频监控区域 -->
        <section class="video-section card">
            <h2>视频监控</h2>
            <div class="video-container">
                <img id="videoStream" src="" alt="视频流加载中..." class="video-placeholder">

                <div id="cameraOverlay" class="camera-overlay">
                    <button id="startCameraButton" class="btn btn-primary camera-control-btn active">
                        <img src="/static/svgs/camera_sleep.svg" alt="开启摄像头" class="icon"> 开启摄像头
                    </button>
                    <button id="stopCameraButton" class="camera-control-btn btn-stop-square" aria-label="停止">
                    </button>
                </div>
            </div>
        </section>

        <!-- 手动控制区域 -->
        <section class="control-section card">
            <h2>驾驶控制</h2>
            
            <!-- 新增：调速滑块 -->
            <div class="speed-control-container">
                <label for="speedRange">
                    动力输出: <span id="speedValue">50</span>%
                </label>
                <div class="slider-wrapper">
                    <span class="speed-icon low">🐢</span>
                    <input type="range" id="speedRange" min="0" max="100" value="50" class="speed-slider">
                    <span class="speed-icon high">🐇</span>
                </div>
            </div>

            <!-- 方向控制网格 -->
            <div class="control-grid">
                <button id="moveForwardLeftButton" class="btn btn-control btn-diag-up-left"
                        data-command="move_left_forward">
                    <img src="/static/svgs/arrow_diag_up_left.svg" alt="左前" class="icon">
                </button>
                <button id="moveForwardButton" class="btn btn-control btn-up" data-command="move_forward">
                    <img src="/static/svgs/arrow_up.svg" alt="前进" class="icon">
                </button>
                <button id="moveForwardRightButton" class="btn btn-control btn-diag-up-right"
                        data-command="move_right_forward">
                    <img src="/static/svgs/arrow_diag_up_left.svg" alt="右前" class="icon icon-rotate-90">
                </button>

                <button id="turnLeftButton" class="btn btn-control btn-turn" data-command="turn_left">
                    <img src="/static/svgs/arrow_turn.svg" alt="左转" class="icon">
                </button>
                <button id="stopButton" class="btn btn-control btn-stop" data-command="stop">
                    <img src="/static/svgs/stop_sign.svg" alt="停止" class="icon">
                </button>
                <button id="turnRightButton" class="btn btn-control btn-turn" data-command="turn_right">
                    <img src="/static/svgs/arrow_turn.svg" alt="右转" class="icon icon-flip-horizontal">
                </button>

                <button id="moveBackwardLeftButton" class="btn btn-control btn-diag-down-left"
                        data-command="move_left_back">
                    <img src="/static/svgs/arrow_diag_up_left.svg" alt="左后" class="icon icon-rotate-270">
                </button>
                <button id="moveBackwardButton" class="btn btn-control btn-down" data-command="move_back">
                    <img src="/static/svgs/arrow_up.svg" alt="后退" class="icon icon-rotate-180">
                </button>
                <button id="moveBackwardRightButton" class="btn btn-control btn-diag-down-right"
                        data-command="move_right_back">
                    <img src="/static/svgs/arrow_diag_up_left.svg" alt="右后" class="icon icon-rotate-180">
                </button>

                <button id="moveLeftButton" class="btn btn-control btn-side-move" data-command="move_left">
                    <img src="/static/svgs/crab.svg" alt="左移" class="icon icon-flip-horizontal">
                </button>
                <div></div>
                <button id="moveRightButton" class="btn btn-control btn-side-move" data-command="move_right">
                    <img src="/static/svgs/crab.svg" alt="右移" class="icon">
                </button>
            </div>
        </section>
    </main>

    <footer class="footer">
        <p>&copy; 小十八 智能小车控制中心. All rights reserved.</p>
    </footer>
</div>

<script src="/static/script.js?v={{ range(1000, 9999) | random | int }}"></script>
</body>
</html>